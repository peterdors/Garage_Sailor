<!DOCTYPE html>
<html>
  <head>

  </head>
  <body>
    <a id="myUrl" >Link</a>
    <div ></div>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY_GOES_HERE"
    ></script>
    <script>


      var geocoder = new google.maps.Geocoder();
      var waypoints = new Array(10);
      var addresses = [   "1570 Carrington Ave., 32708", 
                          "1432 Northern Way, Winter Springs, FL 32708",
                          "687 Benitawood Ct, 32708", 
                          "1388 Yellow Pine Ct, 32708", 
                          "600 Northern Way, 32708",
                          "524 Pleasant Grove Dr, 32708", 
                          "1220 Cheetah Trail, 32708", 
                          "814 Big Buck Cir, 32708",
                          "1013 Fox Den Ct, 32708", 
                          "1570 Carrington Ave., 32708"];
      var url = "https://www.google.com/maps/dir/";

      var order = [0,5,8,3,6,1,2,4,7,9];

      // function latlngToUrl(a, b)
      // {
      //   var myLatLng = new google.maps.LatLng({lat: a , lng: b});
      //   return myLatLng.toUrlValue();
      // }
      // console.log(latlngToUrl(-34.03568344542302, 151.072348254028934));

      const getGeocode = address =>
      {
        return new Promise((resolve, reject) => geocoder.geocode(
          {address: address},

          response =>
          {
            resolve(response[0].geometry.location);

            // // do stuff
            // if (status == "OK")
            // {
            //   url += results[0].geometry.location.toUrlValue();
            //   url += "/";
            // }
            // else
            // {
            // 	alert('Geocode was not successful for the following reason: ' + status);
            // }
          }
        ));
      }


      async function addressToLatLng()
      {

          for (var i = 0; i < addresses.length; i++)
          {
            var val = await getGeocode(addresses[i]);

            url += val.toUrlValue();
            url += "/";
          }

          // console.log(url);

          return url;
        }







        async function main()
        {
          // var addresses = ["1570 Carrington Ave., 32708", "1432 Northern Way, Winter Springs, FL 32708",
          //                     "687 Benitawood Ct, 32708", "1388 Yellow Pine Ct, 32708", "600 Northern Way, 32708",
          //                     "524 Pleasant Grove Dr, 32708", "1220 Cheetah Trail, 32708", "814 Big Buck Cir, 32708",
          //                     "1013 Fox Den Ct, 32708", "1570 Carrington Ave., 32708"];

          //let url = await addressesToUrl(addresses, order);
          var url  = await addressToLatLng();

          console.log(url);

          document.getElementById("myUrl").href = url;


        }


        main();







      // async function addressToLatLng(addi)
      // {
      //   await geocoder.geocode(
      //       {address: addi},
      // 			function(results, status)
      // 			{
      //         //console.log(status);
      //           hello = status;
      // 	  			if (status == 'OK')
      // 	  			{
      // 	  				var myLatLng = results[0].geometry.location;
      //             localStorage.setItem("latlng", myLatLng.toUrlValue());
      // 	  			}
      // 			}
      //   );
      //   var latlng = localStorage.getItem("latlng");
      //   //localStorage.removeItem("latlng");
      //   console.log(latlng);
      //
      //   return latlng;
      // }

      // for me later
      // https://gabrieleromanato.name/javascript-how-to-use-the-google-maps-api-with-promises-and-async-await



      // async function addressesToUrl()
      // {
      //
      //   for (var i = 0; i < addresses.length; i++)
      //   {
      //     url += await waypoints[i];
      //     url += await '/';
      //   }
      //   // console.log(url);
      // }





      // function gasToGang()
      // {
      //
      //   for (var i = 0; i < addresses.length; i++)
      //   {
      //     const getAddress = address => {
      //         return new Promise((resolve, reject) => {
      //             const geocoder = new google.maps.Geocoder();
      //             geocoder.geocode({address: addresses[order[i]]}, (results, status) => {
      //                 if (status === 'OK') {
      //                     resolve(results[0].geometry.location);
      //                 } else {
      //                     reject(status);
      //                 }
      //             });
      //         });
      //     };
      //     waypoints[i] = getAddress;
      //   }
      // }




      // const getAddress = address => {
      //     return new Promise((resolve, reject) => {
      //         const geocoder = new google.maps.Geocoder();
      //         geocoder.geocode({address: waypoints[order[i]]}, (results, status) => {
      //             if (status === 'OK') {
      //                 resolve(results[0].geometry.location);
      //             } else {
      //                 reject(status);
      //             }
      //         });
      //     });
      // };







      //console.log(addressToUrl("1570 Carrington Ave., 32708"));












      // function addressToUrl(addi, callback)
      // {
      //   var hello = geocoder.geocode(
      //       {address: addi},
      // 			function(results, status)
      // 			{
      //         //console.log(status);
      //           hello = status;
      // 	  			if (status == 'OK')
      // 	  			{
      // 	  				var myLatLng = results[0].geometry.location;
      //             callback(myLatLng.toUrlValue());
      // 	  			}
      // 			}
  		//   );
      // }
      //
      // function addressToUrlWrapper(addi)
      // {
      //   addressToUrl(addi, function(addr){
      //       alert(addr);
      //   });
      // }
      //
      // console.log("hi????");
      // console.log(addressToUrlWrapper("1570 Carrington Ave., 32708"));




      // var bank = 8;
      // console.log(funky(bank, 24));
      // function funky(a, b)
      // {
      //   return a + b;
      // }





    </script>

  </body>
</html>
